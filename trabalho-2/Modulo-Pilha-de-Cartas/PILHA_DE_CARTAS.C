
/***************************************************************************
*
*  $MCD Módulo de Implementação: PIL  Pilha de Cartas
*
*  Arquivo gerado:              PIL.C
*  Letras identificadoras:      PIL
*
*  Autores: Eric Grinstein,
*           Jordana Mecler,
*	    Leonardo Wajnsztok
*  
***************************************************************************/
 
#include "LISTA.H"

#define PILHA_DE_CARTAS_OWN
#include "PILHA_DE_CARTAS.H"
#undef PILHA_DE_CARTAS_OWN

typedef LIS_tppLista PIL_tppPilha ; // OS CASTS NAO SAO MAIS NECESSARIOS?
/*****  Código das funções exportadas pelo módulo  *****/

/***************************************************************************
*
*  Função: PIL Criar Pilha Vazia 
*****/

   PIL_tpCondRet PIL_CriarPilhaVazia( PIL_tppPilha * pPilha )
   {
      LIS_tpCondRet condRet ;
      LIS_tppLista pLista ;

      *pPilha = NULL ;
	
      condRet = LIS_CriarLista( &pLista , CAR_ExcluirCarta ) ; 

      if ( condRet == LIS_CondRetFaltouMemoria )
      {
	   return PIL_CondRetFaltouMemoria ; 
      }       	

      * pPilha = ( PIL_tppPilha ) pLista ; 

      return PIL_CondRetOK ;

   } /* Fim função: PIL  &Criar Pilha Vazia */

/***************************************************************************
*
*  Função: PIL Destruir Pilha de Cartas 
*****/

   PIL_tpCondRet PIL_DestruirPilha( PIL_tppPilha pPilha )
   {
	LIS_tppLista pLista = ( LIS_tppLista ) pPilha ;

	LIS_DestruirLista( pLista ) ;

	return PIL_CondRetOK ; 	

   }/* Fim função: PIL Destruir Pilha de Cartas */


/***************************************************************************
*
*  Função: PIL Push Carta 
*****/

   PIL_tpCondRet PIL_PushCarta( PIL_tppPilha pPilha , CAR_tppCarta pCarta )
   {
	LIS_tppLista pLista = ( LIS_tppLista ) pPilha ;

	LIS_IrFinal_Lista( pLista ) ; 

	LIS_InserirElementoApos( pLista , pCarta ) ; 

	return PIL_CondRetOK ; 	

   }/* Fim função: PIL Push Carta */

/***************************************************************************
*
*  Função: PIL VerCarta 
*****/

   PIL_tpCondRet PIL_VerCarta( PIL_tppPilha pPilha , CAR_tppCarta * pCarta , int posicao )
   {
	LIS_tppLista pLista = ( LIS_tppLista ) pPilha ;

	if ( pLista == NULL )
	{
		return PIL_CondRetPilhaVazia ;
	}
	if ( posicao < 0 )
	{
		return PIL_CondRetParamIncorreto ;	
	}

	LIS_IrFinal_Lista( pLista ) ; 

	while ( posicao )
	{
		LIS_AvancarElementoCorrente( pLista , -1 ) ;
		posicao-- ;
	}

        * pCarta = ( CAR_tppCarta ) LIS_ObterValor( pLista ) ;

	return PIL_CondRetOK ; 	

   }/* Fim função: PIL VerCarta */

/***************************************************************************
*
*  Função: PIL PopCarta 
*****/

   PIL_tpCondRet PIL_PopCarta( PIL_tppPilha pPilha , CAR_tppCarta * pCarta )
   {
        PIL_tpCondRet condRet = PIL_VerCarta( pPilha , pCarta , 0 ) ;
                
	if ( condRet != PIL_CondRetOK )
	{
		return condRet ;
	}

	LIS_ExcluirElemento( pLista ); // Provavelmente vai ferrar o troço todo,pois vai excluir a carta.
                                      // talvez seja necessário um método da lista que não libere o conteúdo do
				     // nó, só o nó.
	return PIL_CondRetOK ; 	

   }/* Fim função: PIL Pop Carta */



/********** Fim do módulo de implementação: PIL  Pilha de cartas  **********/


